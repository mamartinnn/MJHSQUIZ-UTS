<!DOCTYPE html>
<html>
<head>
    <title>Choose Subject</title>
</head>
<body>
    <h1>Choose a Subject</h1>

    <form method="get" action="/subjects" class="mb-4">
        <input type="text" name="search" placeholder="Search..." value="<%= searchQuery %>">
      
        <select name="category">
          <option value="">All Categories</option>
          <% categories.forEach(cat => { %>
            <option value="<%= cat %>" <%= selectedCategory === cat ? 'selected' : '' %>><%= cat %></option>
          <% }) %>
        </select>
      
        <button type="submit">Filter</button>
      </form>
      

      <ul>
        <% subjects.forEach(subject => { %>
          <li>
            <h3><%= subject.name %></h3>
            <% if(subject.description) { %>
              <p><%= subject.description %></p>
            <% } %>
            <p>Category: <%= subject.category || "Uncategorized" %></p>
            <a href="/quiz/<%= subject._id %>">Take Quiz</a>
          </li>
        <% }) %>
      </ul>
      

    <a href="/leaderboard">View Leaderboard</a>

    <% if (locals.success && success.length > 0) { %>
        <div style="color: green;"><%= success %></div>
    <% } %>
    <% if (locals.error && error.length > 0) { %>
        <div style="color: red;"><%= error %></div>
    <% } %>
</body>
</html>